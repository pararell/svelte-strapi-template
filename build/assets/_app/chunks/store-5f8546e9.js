import{p as e}from"./api-9553b917.js";import{V as s,W as t}from"./vendor-5e6fc18f.js";const n=s(),r=new t(null),a=new t(null),o=new t([]),l=new t([]),u=new t(!1),c=new t(!1),i=new t(!1),w=new t(null),x=async(s,t)=>{m();try{await e(s,t)&&J()}catch(n){J(JSON.parse(n).errors)}},y=()=>{const e=n.get("user"),s=n.get("token");return e&&s&&(r.next(e),u.next(s)),!0},g=async s=>{m();try{const t=await e("auth/local",s);t&&(n.set("user",JSON.stringify(t.user)),n.set("token",JSON.stringify(t.jwt)),r.next(t.user),u.next(t.token),J())}catch(t){J(JSON.parse(t).errors)}},f=async s=>{m();try{const t=await e("auth/local/register",s);t&&(n.set("user",JSON.stringify(t.user)),n.set("token",JSON.stringify(t.jwt)),r.next(t.user),u.next(t.token),J())}catch(t){J(JSON.parse(t).errors)}},p=()=>{n.remove("token"),n.remove("user"),r.next(null),u.next(null)},m=()=>{i.next(!0),w.next(null)},J=(e=null)=>{const s=e?Array.isArray(e)?e.reduce(((e,s)=>e+", "+s.msg),""):e.msg:null;w.next(s),i.next(!1)};export{l as a,y as b,a as c,c as d,i as e,w as f,g,x as h,p as l,o as p,f as r,r as u};
