import{a0 as a,S as e,i as t,s,e as n,t as l,k as o,c,a as i,g as r,d,n as u,b as p,f as g,F as h,h as m,a1 as b,Z as f,I as v,A as w,a2 as x,a3 as D,a4 as E,a5 as S}from"../../chunks/vendor-d3b32fb2.js";import{g as T}from"../../chunks/api-193a04e1.js";import{c as q,d as y}from"../../chunks/store-cf9ac742.js";const I=e=>{const t=document.createElement("script");return t.type="text/javascript",t.src=e.disqusSrc,t.async=!0,t.setAttribute("data-timestamp",+new Date),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t),window.disqus_config=function(){this.language="en"},a(t,"load")},j=a=>{const e=window.DISQUS||{reset:()=>{}},t=a.host;e.reset({reload:!0,config:function(){this.page.url="https://"+t+"/blogs/"+a.params.slug,this.page.identifier=a.params.slug,this.language="en"}})};function k(a){let e,t,s,f,v,w,x,D,E,S=a[0].Title+"",T=b(a[0].Content)+"",q=new Date(a[0].created_at).toLocaleDateString()+"";return{c(){e=n("h1"),t=l(S),s=o(),f=n("div"),v=o(),w=n("span"),x=l(q),D=o(),E=n("div"),this.h()},l(a){e=c(a,"H1",{class:!0});var n=i(e);t=r(n,S),n.forEach(d),s=u(a),f=c(a,"DIV",{class:!0}),i(f).forEach(d),v=u(a),w=c(a,"SPAN",{class:!0});var l=i(w);x=r(l,q),l.forEach(d),D=u(a),E=c(a,"DIV",{id:!0}),i(E).forEach(d),this.h()},h(){p(e,"class","text-center text-4xl mt-8 pb-4"),p(f,"class","content svelte-wq3e5t"),p(w,"class","date svelte-wq3e5t"),p(E,"id","disqus_thread")},m(a,n){g(a,e,n),h(e,t),g(a,s,n),g(a,f,n),f.innerHTML=T,g(a,v,n),g(a,w,n),h(w,x),g(a,D,n),g(a,E,n)},p(a,e){1&e&&S!==(S=a[0].Title+"")&&m(t,S),1&e&&T!==(T=b(a[0].Content)+"")&&(f.innerHTML=T),1&e&&q!==(q=new Date(a[0].created_at).toLocaleDateString()+"")&&m(x,q)},d(a){a&&d(e),a&&d(s),a&&d(f),a&&d(v),a&&d(w),a&&d(D),a&&d(E)}}}function L(a){var e;let t,s,l;document.title=t=null==(e=a[0])?void 0:e.Title;let r=a[0]&&k(a);return{c(){s=o(),l=n("div"),r&&r.c(),this.h()},l(a){f('[data-svelte="svelte-6m6uzz"]',document.head).forEach(d),s=u(a),l=c(a,"DIV",{class:!0});var e=i(l);r&&r.l(e),e.forEach(d),this.h()},h(){p(l,"class","container max-w-6xl")},m(a,e){g(a,s,e),g(a,l,e),r&&r.m(l,null)},p(a,[e]){var s;1&e&&t!==(t=null==(s=a[0])?void 0:s.Title)&&(document.title=t),a[0]?r?r.p(a,e):(r=k(a),r.c(),r.m(l,null)):r&&(r.d(1),r=null)},i:v,o:v,d(a){a&&d(s),a&&d(l),r&&r.d()}}}const _=async({page:a})=>{const e=await T(`blogs?slug=${a.params.blog}`);return e&&e.length?{props:{blog:e[0],page:a},maxage:0}:{props:{blog:null,page:a}}};function A(a,e,t){let{blog:s}=e,{page:n}=e;return w((()=>{q.pipe(x((a=>y.pipe(D((a=>!a)),S((()=>a))))),D((a=>a&&a.disqusSrc)),E(1)).subscribe((a=>{I(a).pipe(E(1)).subscribe((()=>{y.next(!0)}))})),y.pipe(D(Boolean),E(1)).subscribe((()=>{j(n)}))})),a.$$set=a=>{"blog"in a&&t(0,s=a.blog),"page"in a&&t(1,n=a.page)},[s,n]}class B extends e{constructor(a){super(),t(this,a,A,L,s,{blog:0,page:1})}}export{B as default,_ as load};
