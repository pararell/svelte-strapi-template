import{a0 as e,S as a,i as t,s,e as n,t as l,k as o,c as i,a as c,g as r,d,n as u,b as p,f as g,F as h,h as m,a1 as b,Z as f,I as v,A as w,a2 as x,a3 as D,a4 as E,a5 as S}from"../../chunks/vendor-d3b32fb2.js";import{g as T}from"../../chunks/api-3229d4e4.js";import{c as q,d as y}from"../../chunks/store-392803e1.js";const I=a=>{const t=document.createElement("script");return t.type="text/javascript",t.src=a.disqusSrc,t.async=!0,t.setAttribute("data-timestamp",+new Date),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t),window.disqus_config=function(){this.language="en"},e(t,"load")},j=e=>{const a=window.DISQUS||{reset:()=>{}},t=e.host;a.reset({reload:!0,config:function(){this.page.url="https://"+t+"/blogs/"+e.params.slug,this.page.identifier=e.params.slug,this.language="en"}})};function k(e){let a,t,s,f,v,w,x,D,E,S=e[0].Title+"",T=b(e[0].Content)+"",q=new Date(e[0].created_at).toLocaleDateString()+"";return{c(){a=n("h1"),t=l(S),s=o(),f=n("div"),v=o(),w=n("span"),x=l(q),D=o(),E=n("div"),this.h()},l(e){a=i(e,"H1",{class:!0});var n=c(a);t=r(n,S),n.forEach(d),s=u(e),f=i(e,"DIV",{class:!0}),c(f).forEach(d),v=u(e),w=i(e,"SPAN",{class:!0});var l=c(w);x=r(l,q),l.forEach(d),D=u(e),E=i(e,"DIV",{id:!0}),c(E).forEach(d),this.h()},h(){p(a,"class","text-center text-4xl mt-8 pb-4"),p(f,"class","content svelte-wq3e5t"),p(w,"class","date svelte-wq3e5t"),p(E,"id","disqus_thread")},m(e,n){g(e,a,n),h(a,t),g(e,s,n),g(e,f,n),f.innerHTML=T,g(e,v,n),g(e,w,n),h(w,x),g(e,D,n),g(e,E,n)},p(e,a){1&a&&S!==(S=e[0].Title+"")&&m(t,S),1&a&&T!==(T=b(e[0].Content)+"")&&(f.innerHTML=T),1&a&&q!==(q=new Date(e[0].created_at).toLocaleDateString()+"")&&m(x,q)},d(e){e&&d(a),e&&d(s),e&&d(f),e&&d(v),e&&d(w),e&&d(D),e&&d(E)}}}function L(e){var a;let t,s,l;document.title=t=null==(a=e[0])?void 0:a.Title;let r=e[0]&&k(e);return{c(){s=o(),l=n("div"),r&&r.c(),this.h()},l(e){f('[data-svelte="svelte-6m6uzz"]',document.head).forEach(d),s=u(e),l=i(e,"DIV",{class:!0});var a=c(l);r&&r.l(a),a.forEach(d),this.h()},h(){p(l,"class","container max-w-6xl")},m(e,a){g(e,s,a),g(e,l,a),r&&r.m(l,null)},p(e,[a]){var s;1&a&&t!==(t=null==(s=e[0])?void 0:s.Title)&&(document.title=t),e[0]?r?r.p(e,a):(r=k(e),r.c(),r.m(l,null)):r&&(r.d(1),r=null)},i:v,o:v,d(e){e&&d(s),e&&d(l),r&&r.d()}}}const _=async({page:e})=>{const a=await T(`blogs?slug=${e.params.blog}`);return a&&a.length?{props:{blog:a[0],page:e},maxage:0}:{props:{blog:null,page:e}}};function A(e,a,t){let{blog:s}=a,{page:n}=a;return w((()=>{q.pipe(x((e=>y.pipe(D((e=>!e)),S((()=>e))))),D((e=>e&&e.disqusSrc)),E(1)).subscribe((e=>{I(e).pipe(E(1)).subscribe((()=>{y.next(!0)}))})),y.pipe(D(Boolean),E(1)).subscribe((()=>{j(n)}))})),e.$$set=e=>{"blog"in e&&t(0,s=e.blog),"page"in e&&t(1,n=e.page)},[s,n]}class B extends a{constructor(e){super(),t(this,e,A,L,s,{blog:0,page:1})}}export{B as default,_ as load};
