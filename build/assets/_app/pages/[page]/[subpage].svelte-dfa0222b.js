var W=Object.defineProperty;var L=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var I=(l,e,s)=>e in l?W(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s,V=(l,e)=>{for(var s in e||(e={}))X.call(e,s)&&I(l,s,e[s]);if(L)for(var s of L(e))Y.call(e,s)&&I(l,s,e[s]);return l};import{S as Z,i as x,s as $,a4 as ee,l as N,a5 as te,f as S,a9 as P,d as _,j as T,m as q,o as H,x as p,u as E,v as z,e as b,k as w,c as v,a as k,n as A,b as y,F as g,t as F,g as D,h as se,a6 as le,w as B,N as ne,af as ae,r as C,ac as ie,ag as fe,ad as re}from"../../chunks/vendor-ecfff0c6.js";import{g as oe}from"../../chunks/api-22c92218.js";import{p as ce,h as ue,e as me,f as O}from"../../chunks/store-2f033d10.js";import{F as de}from"../../chunks/Form-ba00398c.js";function U(l){let e,s=P(l[2])+"",t;return{c(){e=new ee,t=N(),this.h()},l(a){e=te(a),t=N(),this.h()},h(){e.a=t},m(a,u){e.m(s,a,u),S(a,t,u)},p(a,u){u&4&&s!==(s=P(a[2])+"")&&e.p(s)},d(a){a&&_(t),a&&e.d()}}}function G(l){let e,s;return e=new ae({}),{c(){T(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function J(l){let e,s,t,a,u,d;t=new de({props:{form:l[3]}}),t.$on("submitForm",l[7]);let o=l[0]&&K(),n=l[6]&&M();return{c(){e=b("div"),s=b("div"),T(t.$$.fragment),a=w(),o&&o.c(),u=w(),n&&n.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=k(e);s=v(f,"DIV",{class:!0});var c=k(s);q(t.$$.fragment,c),c.forEach(_),a=A(f),o&&o.l(f),u=A(f),n&&n.l(f),f.forEach(_),this.h()},h(){y(s,"class","center-content"),y(e,"class","container")},m(i,f){S(i,e,f),g(e,s),H(t,s,null),g(e,a),o&&o.m(e,null),g(e,u),n&&n.m(e,null),d=!0},p(i,f){const c={};f&8&&(c.form=i[3]),t.$set(c),i[0]?o||(o=K(),o.c(),o.m(e,u)):o&&(o.d(1),o=null),i[6]?n||(n=M(),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i(i){d||(p(t.$$.fragment,i),d=!0)},o(i){E(t.$$.fragment,i),d=!1},d(i){i&&_(e),z(t),o&&o.d(),n&&n.d()}}}function K(l){let e,s;return{c(){e=b("span"),s=F("Sended successfully"),this.h()},l(t){e=v(t,"SPAN",{class:!0});var a=k(e);s=D(a,"Sended successfully"),a.forEach(_),this.h()},h(){y(e,"class","text-green-500 text-center")},m(t,a){S(t,e,a),g(e,s)},d(t){t&&_(e)}}}function M(l){let e,s;return{c(){e=b("span"),s=F("Error, try again"),this.h()},l(t){e=v(t,"SPAN",{class:!0});var a=k(e);s=D(a,"Error, try again"),a.forEach(_),this.h()},h(){y(e,"class","text-red-500 text-center")},m(t,a){S(t,e,a),g(e,s)},d(t){t&&_(e)}}}function Q(l){let e,s,t,a;return{c(){e=b("div"),s=b("div"),t=b("span"),a=F(l[4]),this.h()},l(u){e=v(u,"DIV",{class:!0});var d=k(e);s=v(d,"DIV",{class:!0});var o=k(s);t=v(o,"SPAN",{class:!0});var n=k(t);a=D(n,l[4]),n.forEach(_),o.forEach(_),d.forEach(_),this.h()},h(){y(t,"class","text-center m-auto py-8 text-2xl"),y(s,"class","container flex items-center justify-center"),y(e,"class","m-auto w-full")},m(u,d){S(u,e,d),g(e,s),g(s,t),g(t,a)},p(u,d){d&16&&se(a,u[4])},d(u){u&&_(e)}}}function _e(l){let e,s,t,a,u,d,o;document.title=e=l[5];let n=l[2]&&U(l),i=l[1]&&G(),f=l[3]&&!l[1]&&J(l),c=l[4]&&Q(l);return{c(){s=w(),t=b("div"),n&&n.c(),a=w(),i&&i.c(),u=w(),f&&f.c(),d=w(),c&&c.c(),this.h()},l(m){le('[data-svelte="svelte-1az6e94"]',document.head).forEach(_),s=A(m),t=v(m,"DIV",{class:!0});var h=k(t);n&&n.l(h),a=A(h),i&&i.l(h),u=A(h),f&&f.l(h),d=A(h),c&&c.l(h),h.forEach(_),this.h()},h(){y(t,"class","w-full")},m(m,r){S(m,s,r),S(m,t,r),n&&n.m(t,null),g(t,a),i&&i.m(t,null),g(t,u),f&&f.m(t,null),g(t,d),c&&c.m(t,null),o=!0},p(m,[r]){(!o||r&32)&&e!==(e=m[5])&&(document.title=e),m[2]?n?n.p(m,r):(n=U(m),n.c(),n.m(t,a)):n&&(n.d(1),n=null),m[1]?i?r&2&&p(i,1):(i=G(),i.c(),p(i,1),i.m(t,u)):i&&(C(),E(i,1,1,()=>{i=null}),B()),m[3]&&!m[1]?f?(f.p(m,r),r&10&&p(f,1)):(f=J(m),f.c(),p(f,1),f.m(t,d)):f&&(C(),E(f,1,1,()=>{f=null}),B()),m[4]?c?c.p(m,r):(c=Q(m),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(m){o||(p(i),p(f),o=!0)},o(m){E(i),E(f),o=!1},d(m){m&&_(s),m&&_(t),n&&n.d(),i&&i.d(),f&&f.d(),c&&c.d()}}}const ye=async({page:l})=>{const e=l.path.split("/")[1],s=await oe("contents?slug="+(e+"-"+l.params.subpage));if(s&&s.length){const t=s[0];return{props:{content:t.content,form:t.form?Object.entries(t.form.fields):null,formAction:t.form?t.form.action:null,pageSlug:l.params.subpage,empty:"",success:!1},maxage:0}}return{props:{empty:"This page is empty",pageSlug:l.params.subpage,form:null,success:!1}}};function he(l,e,s){let t,a;ne(l,O,r=>s(6,a=r));let{content:u=null}=e,{form:d=null}=e,{formAction:o=""}=e,{pageSlug:n=null}=e,{empty:i=null}=e,{success:f=!1}=e,{formLoading:c=!1}=e;async function m(r){const h=V({},r.detail);!o||(s(1,c=!0),ue(o,h),me.pipe(ie(j=>!j),fe(O),re(1)).subscribe(([j,R])=>{s(1,c=!1),R||s(0,f=!0)}))}return l.$$set=r=>{"content"in r&&s(2,u=r.content),"form"in r&&s(3,d=r.form),"formAction"in r&&s(8,o=r.formAction),"pageSlug"in r&&s(9,n=r.pageSlug),"empty"in r&&s(4,i=r.empty),"success"in r&&s(0,f=r.success),"formLoading"in r&&s(1,c=r.formLoading)},l.$$.update=()=>{var r,h;l.$$.dirty&512&&s(5,t=((h=(r=ce.value)==null?void 0:r.find(j=>j.slug===n))==null?void 0:h.metaTitle)||n)},[f,c,u,d,i,t,a,m,o,n]}class Se extends Z{constructor(e){super();x(this,e,he,_e,$,{content:2,form:3,formAction:8,pageSlug:9,empty:4,success:0,formLoading:1})}}export{Se as default,ye as load};
