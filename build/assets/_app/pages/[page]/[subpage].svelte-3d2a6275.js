var s=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,n=(t,a,e)=>a in t?s(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;import{S as r,i as l,s as c,Y as o,l as u,Z as i,f as m,a1 as f,d as p,j as d,m as h,o as g,x as v,u as $,v as y,e as b,k as S,c as x,a as E,n as j,b as w,F as A,t as O,g as I,h as P,_ as k,w as D,L,a7 as V,r as F,a4 as N,a8 as z,a5 as T}from"../../chunks/vendor-262dbd3a.js";import{g as Y}from"../../chunks/api-459a3947.js";import{p as Z,h as _,e as q,f as B}from"../../chunks/store-5c78f67a.js";import{F as C}from"../../chunks/Form-0df8493f.js";function G(s){let t,a,e=f(s[2])+"";return{c(){t=new o,a=u(),this.h()},l(s){t=i(s),a=u(),this.h()},h(){t.a=a},m(s,n){t.m(e,s,n),m(s,a,n)},p(s,a){4&a&&e!==(e=f(s[2])+"")&&t.p(e)},d(s){s&&p(a),s&&t.d()}}}function H(s){let t,a;return t=new V({}),{c(){d(t.$$.fragment)},l(s){h(t.$$.fragment,s)},m(s,e){g(t,s,e),a=!0},i(s){a||(v(t.$$.fragment,s),a=!0)},o(s){$(t.$$.fragment,s),a=!1},d(s){y(t,s)}}}function J(s){let t,a,e,n,r,l;e=new C({props:{form:s[3]}}),e.$on("submitForm",s[7]);let c=s[0]&&K(),o=s[6]&&M();return{c(){t=b("div"),a=b("div"),d(e.$$.fragment),n=S(),c&&c.c(),r=S(),o&&o.c(),this.h()},l(s){t=x(s,"DIV",{class:!0});var l=E(t);a=x(l,"DIV",{class:!0});var u=E(a);h(e.$$.fragment,u),u.forEach(p),n=j(l),c&&c.l(l),r=j(l),o&&o.l(l),l.forEach(p),this.h()},h(){w(a,"class","center-content"),w(t,"class","container")},m(s,u){m(s,t,u),A(t,a),g(e,a,null),A(t,n),c&&c.m(t,null),A(t,r),o&&o.m(t,null),l=!0},p(s,a){const n={};8&a&&(n.form=s[3]),e.$set(n),s[0]?c||(c=K(),c.c(),c.m(t,r)):c&&(c.d(1),c=null),s[6]?o||(o=M(),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(s){l||(v(e.$$.fragment,s),l=!0)},o(s){$(e.$$.fragment,s),l=!1},d(s){s&&p(t),y(e),c&&c.d(),o&&o.d()}}}function K(s){let t,a;return{c(){t=b("span"),a=O("Sended successfully"),this.h()},l(s){t=x(s,"SPAN",{class:!0});var e=E(t);a=I(e,"Sended successfully"),e.forEach(p),this.h()},h(){w(t,"class","text-green-500 text-center")},m(s,e){m(s,t,e),A(t,a)},d(s){s&&p(t)}}}function M(s){let t,a;return{c(){t=b("span"),a=O("Error, try again"),this.h()},l(s){t=x(s,"SPAN",{class:!0});var e=E(t);a=I(e,"Error, try again"),e.forEach(p),this.h()},h(){w(t,"class","text-red-500 text-center")},m(s,e){m(s,t,e),A(t,a)},d(s){s&&p(t)}}}function Q(s){let t,a,e,n;return{c(){t=b("div"),a=b("div"),e=b("span"),n=O(s[4]),this.h()},l(r){t=x(r,"DIV",{class:!0});var l=E(t);a=x(l,"DIV",{class:!0});var c=E(a);e=x(c,"SPAN",{class:!0});var o=E(e);n=I(o,s[4]),o.forEach(p),c.forEach(p),l.forEach(p),this.h()},h(){w(e,"class","text-center m-auto py-8 text-2xl"),w(a,"class","container flex items-center justify-center"),w(t,"class","m-auto w-full")},m(s,r){m(s,t,r),A(t,a),A(a,e),A(e,n)},p(s,t){16&t&&P(n,s[4])},d(s){s&&p(t)}}}function R(s){let t,a,e,n,r,l,c;document.title=t=s[5];let o=s[2]&&G(s),u=s[1]&&H(),i=s[3]&&!s[1]&&J(s),f=s[4]&&Q(s);return{c(){a=S(),e=b("div"),o&&o.c(),n=S(),u&&u.c(),r=S(),i&&i.c(),l=S(),f&&f.c(),this.h()},l(s){k('[data-svelte="svelte-1az6e94"]',document.head).forEach(p),a=j(s),e=x(s,"DIV",{class:!0});var t=E(e);o&&o.l(t),n=j(t),u&&u.l(t),r=j(t),i&&i.l(t),l=j(t),f&&f.l(t),t.forEach(p),this.h()},h(){w(e,"class","w-full")},m(s,t){m(s,a,t),m(s,e,t),o&&o.m(e,null),A(e,n),u&&u.m(e,null),A(e,r),i&&i.m(e,null),A(e,l),f&&f.m(e,null),c=!0},p(s,[a]){(!c||32&a)&&t!==(t=s[5])&&(document.title=t),s[2]?o?o.p(s,a):(o=G(s),o.c(),o.m(e,n)):o&&(o.d(1),o=null),s[1]?u?2&a&&v(u,1):(u=H(),u.c(),v(u,1),u.m(e,r)):u&&(F(),$(u,1,1,(()=>{u=null})),D()),s[3]&&!s[1]?i?(i.p(s,a),10&a&&v(i,1)):(i=J(s),i.c(),v(i,1),i.m(e,l)):i&&(F(),$(i,1,1,(()=>{i=null})),D()),s[4]?f?f.p(s,a):(f=Q(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(s){c||(v(u),v(i),c=!0)},o(s){$(u),$(i),c=!1},d(s){s&&p(a),s&&p(e),o&&o.d(),u&&u.d(),i&&i.d(),f&&f.d()}}}const U=async({page:s})=>{const t=s.path.split("/")[1],a=await Y("contents?slug="+t+"-"+s.params.subpage);if(a&&a.length){const t=a[0];return{props:{content:t.content,form:t.form?Object.entries(t.form.fields):null,formAction:t.form?t.form.action:null,pageSlug:s.params.subpage,empty:"",success:!1},maxage:0}}return{props:{empty:"This page is empty",pageSlug:s.params.subpage,form:null,success:!1}}};function W(s,r,l){let c,o;L(s,B,(s=>l(6,o=s)));let{content:u=null}=r,{form:i=null}=r,{formAction:m=""}=r,{pageSlug:f=null}=r,{empty:p=null}=r,{success:d=!1}=r,{formLoading:h=!1}=r;return s.$$set=s=>{"content"in s&&l(2,u=s.content),"form"in s&&l(3,i=s.form),"formAction"in s&&l(8,m=s.formAction),"pageSlug"in s&&l(9,f=s.pageSlug),"empty"in s&&l(4,p=s.empty),"success"in s&&l(0,d=s.success),"formLoading"in s&&l(1,h=s.formLoading)},s.$$.update=()=>{var t,a;512&s.$$.dirty&&l(5,c=(null==(a=null==(t=Z.value)?void 0:t.find((s=>s.slug===f)))?void 0:a.title)||f)},[d,h,u,i,p,c,o,async function(s){const r=((s,r)=>{for(var l in r||(r={}))a.call(r,l)&&n(s,l,r[l]);if(t)for(var l of t(r))e.call(r,l)&&n(s,l,r[l]);return s})({},s.detail);m&&(l(1,h=!0),_(m,r),q.pipe(N((s=>!s)),z(B),T(1)).subscribe((([s,t])=>{l(1,h=!1),t||l(0,d=!0)})))},m,f]}class X extends r{constructor(s){super(),l(this,s,W,R,c,{content:2,form:3,formAction:8,pageSlug:9,empty:4,success:0,formLoading:1})}}export{X as default,U as load};
