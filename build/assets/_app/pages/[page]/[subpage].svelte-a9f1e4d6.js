var s=Object.defineProperty,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,e,a)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;import{S as r,i as l,s as c,X as o,l as u,Y as i,f as m,d as f,j as p,m as d,o as h,x as g,u as v,v as $,e as y,k as b,c as S,a as x,n as E,b as j,F as w,t as A,g as O,h as I,Z as P,w as k,J as D,T as V,r as F,a3 as L,a6 as N,a4 as T}from"../../chunks/vendor-d3b32fb2.js";import{g as z}from"../../chunks/api-193a04e1.js";import{p as J,g as X,b as Y,e as Z}from"../../chunks/store-cf9ac742.js";import{F as q}from"../../chunks/Form-637b0377.js";function B(s){let t,e;return{c(){t=new o,e=u(),this.h()},l(s){t=i(s),e=u(),this.h()},h(){t.a=e},m(a,n){t.m(s[2],a,n),m(a,e,n)},p(s,e){4&e&&t.p(s[2])},d(s){s&&f(e),s&&t.d()}}}function C(s){let t,e;return t=new V({}),{c(){p(t.$$.fragment)},l(s){d(t.$$.fragment,s)},m(s,a){h(t,s,a),e=!0},i(s){e||(g(t.$$.fragment,s),e=!0)},o(s){v(t.$$.fragment,s),e=!1},d(s){$(t,s)}}}function G(s){let t,e,a,n,r,l;a=new q({props:{form:s[3]}}),a.$on("submitForm",s[7]);let c=s[0]&&H(),o=s[6]&&K();return{c(){t=y("div"),e=y("div"),p(a.$$.fragment),n=b(),c&&c.c(),r=b(),o&&o.c(),this.h()},l(s){t=S(s,"DIV",{class:!0});var l=x(t);e=S(l,"DIV",{class:!0});var u=x(e);d(a.$$.fragment,u),u.forEach(f),n=E(l),c&&c.l(l),r=E(l),o&&o.l(l),l.forEach(f),this.h()},h(){j(e,"class","center-content"),j(t,"class","container")},m(s,u){m(s,t,u),w(t,e),h(a,e,null),w(t,n),c&&c.m(t,null),w(t,r),o&&o.m(t,null),l=!0},p(s,e){const n={};8&e&&(n.form=s[3]),a.$set(n),s[0]?c||(c=H(),c.c(),c.m(t,r)):c&&(c.d(1),c=null),s[6]?o||(o=K(),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(s){l||(g(a.$$.fragment,s),l=!0)},o(s){v(a.$$.fragment,s),l=!1},d(s){s&&f(t),$(a),c&&c.d(),o&&o.d()}}}function H(s){let t,e;return{c(){t=y("span"),e=A("Sended successfully"),this.h()},l(s){t=S(s,"SPAN",{class:!0});var a=x(t);e=O(a,"Sended successfully"),a.forEach(f),this.h()},h(){j(t,"class","text-green-500 text-center")},m(s,a){m(s,t,a),w(t,e)},d(s){s&&f(t)}}}function K(s){let t,e;return{c(){t=y("span"),e=A("Error, try again"),this.h()},l(s){t=S(s,"SPAN",{class:!0});var a=x(t);e=O(a,"Error, try again"),a.forEach(f),this.h()},h(){j(t,"class","text-red-500 text-center")},m(s,a){m(s,t,a),w(t,e)},d(s){s&&f(t)}}}function M(s){let t,e,a,n;return{c(){t=y("div"),e=y("div"),a=y("span"),n=A(s[4]),this.h()},l(r){t=S(r,"DIV",{class:!0});var l=x(t);e=S(l,"DIV",{class:!0});var c=x(e);a=S(c,"SPAN",{class:!0});var o=x(a);n=O(o,s[4]),o.forEach(f),c.forEach(f),l.forEach(f),this.h()},h(){j(a,"class","text-center m-auto py-8 text-2xl"),j(e,"class","container flex items-center justify-center"),j(t,"class","m-auto w-full")},m(s,r){m(s,t,r),w(t,e),w(e,a),w(a,n)},p(s,t){16&t&&I(n,s[4])},d(s){s&&f(t)}}}function Q(s){let t,e,a,n,r,l,c;document.title=t=s[5];let o=s[2]&&B(s),u=s[1]&&C(),i=s[3]&&!s[1]&&G(s),p=s[4]&&M(s);return{c(){e=b(),a=y("div"),o&&o.c(),n=b(),u&&u.c(),r=b(),i&&i.c(),l=b(),p&&p.c(),this.h()},l(s){P('[data-svelte="svelte-1az6e94"]',document.head).forEach(f),e=E(s),a=S(s,"DIV",{class:!0});var t=x(a);o&&o.l(t),n=E(t),u&&u.l(t),r=E(t),i&&i.l(t),l=E(t),p&&p.l(t),t.forEach(f),this.h()},h(){j(a,"class","w-full")},m(s,t){m(s,e,t),m(s,a,t),o&&o.m(a,null),w(a,n),u&&u.m(a,null),w(a,r),i&&i.m(a,null),w(a,l),p&&p.m(a,null),c=!0},p(s,[e]){(!c||32&e)&&t!==(t=s[5])&&(document.title=t),s[2]?o?o.p(s,e):(o=B(s),o.c(),o.m(a,n)):o&&(o.d(1),o=null),s[1]?u?2&e&&g(u,1):(u=C(),u.c(),g(u,1),u.m(a,r)):u&&(F(),v(u,1,1,(()=>{u=null})),k()),s[3]&&!s[1]?i?(i.p(s,e),10&e&&g(i,1)):(i=G(s),i.c(),g(i,1),i.m(a,l)):i&&(F(),v(i,1,1,(()=>{i=null})),k()),s[4]?p?p.p(s,e):(p=M(s),p.c(),p.m(a,null)):p&&(p.d(1),p=null)},i(s){c||(g(u),g(i),c=!0)},o(s){v(u),v(i),c=!1},d(s){s&&f(e),s&&f(a),o&&o.d(),u&&u.d(),i&&i.d(),p&&p.d()}}}const R=async({page:s})=>{const t=s.path.split("/")[1],e=await z("contents?slug="+t+"-"+s.params.subpage);if(e&&e.length){const t=e[0];return{props:{content:t.content,form:t.form?Object.entries(t.form.fields):null,formAction:t.form?t.form.action:null,pageSlug:s.params.subpage,empty:"",success:!1},maxage:0}}return{props:{empty:"This page is empty",pageSlug:s.params.subpage,form:null,success:!1}}};function U(s,r,l){let c,o;D(s,Z,(s=>l(6,o=s)));let{content:u=null}=r,{form:i=null}=r,{formAction:m=""}=r,{pageSlug:f=null}=r,{empty:p=null}=r,{success:d=!1}=r,{formLoading:h=!1}=r;return s.$$set=s=>{"content"in s&&l(2,u=s.content),"form"in s&&l(3,i=s.form),"formAction"in s&&l(8,m=s.formAction),"pageSlug"in s&&l(9,f=s.pageSlug),"empty"in s&&l(4,p=s.empty),"success"in s&&l(0,d=s.success),"formLoading"in s&&l(1,h=s.formLoading)},s.$$.update=()=>{var t,e;512&s.$$.dirty&&l(5,c=(null==(e=null==(t=J.value)?void 0:t.find((s=>s.slug===f)))?void 0:e.title)||f)},[d,h,u,i,p,c,o,async function(s){const r=((s,r)=>{for(var l in r||(r={}))e.call(r,l)&&n(s,l,r[l]);if(t)for(var l of t(r))a.call(r,l)&&n(s,l,r[l]);return s})({},s.detail);m&&(l(1,h=!0),X(m,r),Y.pipe(L((s=>!s)),N(Z),T(1)).subscribe((([s,t])=>{l(1,h=!1),t||l(0,d=!0)})))},m,f]}class W extends r{constructor(s){super(),l(this,s,U,Q,c,{content:2,form:3,formAction:8,pageSlug:9,empty:4,success:0,formLoading:1})}}export{W as default,R as load};
