import{p as e}from"./api-3229d4e4.js";import{V as t,W as s}from"./vendor-d3b32fb2.js";const n=t(),r=new s(null),a=new s(null),o=new s([]),l=new s(!1),u=new s(!1),c=new s(!1),i=new s(null),x=async(t,s)=>{f();try{await e(t,s)&&m()}catch(n){m(JSON.parse(n).errors)}},w=()=>{const e=n.get("user"),t=n.get("token");return e&&t&&(r.next(e),l.next(t)),!0},y=async t=>{f();try{const s=await e("auth/local",t);s&&(n.set("user",JSON.stringify(s.user)),n.set("token",JSON.stringify(s.jwt)),r.next(s.user),l.next(s.token),m())}catch(s){m(JSON.parse(s).errors)}},g=async t=>{f();try{const s=await e("auth/local/register",t);s&&(n.set("user",JSON.stringify(s.user)),n.set("token",JSON.stringify(s.jwt)),r.next(s.user),l.next(s.token),m())}catch(s){m(JSON.parse(s).errors)}},p=()=>{n.remove("token"),n.remove("user"),r.next(null),l.next(null)},f=()=>{c.next(!0),i.next(null)},m=(e=null)=>{const t=e?Array.isArray(e)?e.reduce(((e,t)=>e+", "+t.msg),""):e.msg:null;i.next(t),c.next(!1)};export{w as a,c as b,a as c,u as d,i as e,y as f,x as g,p as l,o as p,g as r,r as u};
