var s=Object.defineProperty,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,e,a)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;import{S as r,i as l,s as c,X as o,l as u,Y as i,f as m,a0 as f,d as p,j as h,m as d,o as g,x as v,u as $,v as y,e as b,k as S,c as x,a as E,n as j,b as w,F as A,t as O,g as I,h as P,Z as k,w as D,K as V,T as F,r as L,a3 as N,a6 as T,a4 as z}from"../../chunks/vendor-5e6fc18f.js";import{g as K}from"../../chunks/api-9553b917.js";import{p as X,h as Y,e as Z,f as q}from"../../chunks/store-5f8546e9.js";import{F as B}from"../../chunks/Form-80e69b76.js";function C(s){let t,e,a=f(s[2])+"";return{c(){t=new o,e=u(),this.h()},l(s){t=i(s),e=u(),this.h()},h(){t.a=e},m(s,n){t.m(a,s,n),m(s,e,n)},p(s,e){4&e&&a!==(a=f(s[2])+"")&&t.p(a)},d(s){s&&p(e),s&&t.d()}}}function G(s){let t,e;return t=new F({}),{c(){h(t.$$.fragment)},l(s){d(t.$$.fragment,s)},m(s,a){g(t,s,a),e=!0},i(s){e||(v(t.$$.fragment,s),e=!0)},o(s){$(t.$$.fragment,s),e=!1},d(s){y(t,s)}}}function H(s){let t,e,a,n,r,l;a=new B({props:{form:s[3]}}),a.$on("submitForm",s[7]);let c=s[0]&&J(),o=s[6]&&M();return{c(){t=b("div"),e=b("div"),h(a.$$.fragment),n=S(),c&&c.c(),r=S(),o&&o.c(),this.h()},l(s){t=x(s,"DIV",{class:!0});var l=E(t);e=x(l,"DIV",{class:!0});var u=E(e);d(a.$$.fragment,u),u.forEach(p),n=j(l),c&&c.l(l),r=j(l),o&&o.l(l),l.forEach(p),this.h()},h(){w(e,"class","center-content"),w(t,"class","container")},m(s,u){m(s,t,u),A(t,e),g(a,e,null),A(t,n),c&&c.m(t,null),A(t,r),o&&o.m(t,null),l=!0},p(s,e){const n={};8&e&&(n.form=s[3]),a.$set(n),s[0]?c||(c=J(),c.c(),c.m(t,r)):c&&(c.d(1),c=null),s[6]?o||(o=M(),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i(s){l||(v(a.$$.fragment,s),l=!0)},o(s){$(a.$$.fragment,s),l=!1},d(s){s&&p(t),y(a),c&&c.d(),o&&o.d()}}}function J(s){let t,e;return{c(){t=b("span"),e=O("Sended successfully"),this.h()},l(s){t=x(s,"SPAN",{class:!0});var a=E(t);e=I(a,"Sended successfully"),a.forEach(p),this.h()},h(){w(t,"class","text-green-500 text-center")},m(s,a){m(s,t,a),A(t,e)},d(s){s&&p(t)}}}function M(s){let t,e;return{c(){t=b("span"),e=O("Error, try again"),this.h()},l(s){t=x(s,"SPAN",{class:!0});var a=E(t);e=I(a,"Error, try again"),a.forEach(p),this.h()},h(){w(t,"class","text-red-500 text-center")},m(s,a){m(s,t,a),A(t,e)},d(s){s&&p(t)}}}function Q(s){let t,e,a,n;return{c(){t=b("div"),e=b("div"),a=b("span"),n=O(s[4]),this.h()},l(r){t=x(r,"DIV",{class:!0});var l=E(t);e=x(l,"DIV",{class:!0});var c=E(e);a=x(c,"SPAN",{class:!0});var o=E(a);n=I(o,s[4]),o.forEach(p),c.forEach(p),l.forEach(p),this.h()},h(){w(a,"class","text-center m-auto py-8 text-2xl"),w(e,"class","container flex items-center justify-center"),w(t,"class","m-auto w-full")},m(s,r){m(s,t,r),A(t,e),A(e,a),A(a,n)},p(s,t){16&t&&P(n,s[4])},d(s){s&&p(t)}}}function R(s){let t,e,a,n,r,l,c;document.title=t=s[5];let o=s[2]&&C(s),u=s[1]&&G(),i=s[3]&&!s[1]&&H(s),f=s[4]&&Q(s);return{c(){e=S(),a=b("div"),o&&o.c(),n=S(),u&&u.c(),r=S(),i&&i.c(),l=S(),f&&f.c(),this.h()},l(s){k('[data-svelte="svelte-1az6e94"]',document.head).forEach(p),e=j(s),a=x(s,"DIV",{class:!0});var t=E(a);o&&o.l(t),n=j(t),u&&u.l(t),r=j(t),i&&i.l(t),l=j(t),f&&f.l(t),t.forEach(p),this.h()},h(){w(a,"class","w-full")},m(s,t){m(s,e,t),m(s,a,t),o&&o.m(a,null),A(a,n),u&&u.m(a,null),A(a,r),i&&i.m(a,null),A(a,l),f&&f.m(a,null),c=!0},p(s,[e]){(!c||32&e)&&t!==(t=s[5])&&(document.title=t),s[2]?o?o.p(s,e):(o=C(s),o.c(),o.m(a,n)):o&&(o.d(1),o=null),s[1]?u?2&e&&v(u,1):(u=G(),u.c(),v(u,1),u.m(a,r)):u&&(L(),$(u,1,1,(()=>{u=null})),D()),s[3]&&!s[1]?i?(i.p(s,e),10&e&&v(i,1)):(i=H(s),i.c(),v(i,1),i.m(a,l)):i&&(L(),$(i,1,1,(()=>{i=null})),D()),s[4]?f?f.p(s,e):(f=Q(s),f.c(),f.m(a,null)):f&&(f.d(1),f=null)},i(s){c||(v(u),v(i),c=!0)},o(s){$(u),$(i),c=!1},d(s){s&&p(e),s&&p(a),o&&o.d(),u&&u.d(),i&&i.d(),f&&f.d()}}}const U=async({page:s})=>{const t=s.path.split("/")[1],e=await K("contents?slug="+t+"-"+s.params.subpage);if(e&&e.length){const t=e[0];return{props:{content:t.content,form:t.form?Object.entries(t.form.fields):null,formAction:t.form?t.form.action:null,pageSlug:s.params.subpage,empty:"",success:!1},maxage:0}}return{props:{empty:"This page is empty",pageSlug:s.params.subpage,form:null,success:!1}}};function W(s,r,l){let c,o;V(s,q,(s=>l(6,o=s)));let{content:u=null}=r,{form:i=null}=r,{formAction:m=""}=r,{pageSlug:f=null}=r,{empty:p=null}=r,{success:h=!1}=r,{formLoading:d=!1}=r;return s.$$set=s=>{"content"in s&&l(2,u=s.content),"form"in s&&l(3,i=s.form),"formAction"in s&&l(8,m=s.formAction),"pageSlug"in s&&l(9,f=s.pageSlug),"empty"in s&&l(4,p=s.empty),"success"in s&&l(0,h=s.success),"formLoading"in s&&l(1,d=s.formLoading)},s.$$.update=()=>{var t,e;512&s.$$.dirty&&l(5,c=(null==(e=null==(t=X.value)?void 0:t.find((s=>s.slug===f)))?void 0:e.title)||f)},[h,d,u,i,p,c,o,async function(s){const r=((s,r)=>{for(var l in r||(r={}))e.call(r,l)&&n(s,l,r[l]);if(t)for(var l of t(r))a.call(r,l)&&n(s,l,r[l]);return s})({},s.detail);m&&(l(1,d=!0),Y(m,r),Z.pipe(N((s=>!s)),T(q),z(1)).subscribe((([s,t])=>{l(1,d=!1),t||l(0,h=!0)})))},m,f]}class _ extends r{constructor(s){super(),l(this,s,W,R,c,{content:2,form:3,formAction:8,pageSlug:9,empty:4,success:0,formLoading:1})}}export{_ as default,U as load};
