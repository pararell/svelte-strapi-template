var Q=Object.defineProperty;var S=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(n,e,s)=>e in n?Q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,C=(n,e)=>{for(var s in e||(e={}))R.call(e,s)&&I(n,s,e[s]);if(S)for(var s of S(e))U.call(e,s)&&I(n,s,e[s]);return n};import{S as W,i as X,s as Y,j as D,m as N,o as O,x as _,u as v,v as V,e as k,t as q,c as F,a as $,g as A,d as h,b as j,f as H,F as g,h as Z,k as w,n as E,w as P,L as T,aa as x,r as z,a7 as ee,ab as te,a8 as se}from"../../chunks/vendor-d1c45db0.js";import{g as ne}from"../../chunks/api-c3d01688.js";import{F as re}from"../../chunks/Form-cf4813e4.js";import{g as ae,e as B,f as G}from"../../chunks/store-0265ef29.js";import{g as oe}from"../../chunks/navigation-51f4a605.js";import"../../chunks/singletons-12a22614.js";function J(n){let e,s;return e=new re({props:{form:n[0]}}),e.$on("submitForm",n[3]),{c(){D(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){O(e,t,r),s=!0},p(t,r){const c={};r&1&&(c.form=t[0]),e.$set(c)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){v(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function K(n){let e,s;return e=new x({}),{c(){D(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){O(e,t,r),s=!0},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){v(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function M(n){let e,s;return{c(){e=k("span"),s=q(n[2]),this.h()},l(t){e=F(t,"SPAN",{class:!0});var r=$(e);s=A(r,n[2]),r.forEach(h),this.h()},h(){j(e,"class","warning")},m(t,r){H(t,e,r),g(e,s)},p(t,r){r&4&&Z(s,t[2])},d(t){t&&h(e)}}}function ie(n){let e,s,t,r,c,b,f,p,d,a=n[0]&&!n[1]&&J(n),o=n[1]&&K(),i=n[2]&&M(n);return{c(){e=k("section"),s=k("div"),t=k("div"),r=k("h2"),c=q("Login"),b=w(),a&&a.c(),f=w(),o&&o.c(),p=w(),i&&i.c(),this.h()},l(l){e=F(l,"SECTION",{});var m=$(e);s=F(m,"DIV",{class:!0});var L=$(s);t=F(L,"DIV",{class:!0});var u=$(t);r=F(u,"H2",{class:!0});var y=$(r);c=A(y,"Login"),y.forEach(h),b=E(u),a&&a.l(u),f=E(u),o&&o.l(u),p=E(u),i&&i.l(u),u.forEach(h),L.forEach(h),m.forEach(h),this.h()},h(){j(r,"class","text-center text-3xl"),j(t,"class","center-content svelte-1tdkxwr"),j(s,"class","container")},m(l,m){H(l,e,m),g(e,s),g(s,t),g(t,r),g(r,c),g(t,b),a&&a.m(t,null),g(t,f),o&&o.m(t,null),g(t,p),i&&i.m(t,null),d=!0},p(l,[m]){l[0]&&!l[1]?a?(a.p(l,m),m&3&&_(a,1)):(a=J(l),a.c(),_(a,1),a.m(t,f)):a&&(z(),v(a,1,1,()=>{a=null}),P()),l[1]?o?m&2&&_(o,1):(o=K(),o.c(),_(o,1),o.m(t,p)):o&&(z(),v(o,1,1,()=>{o=null}),P()),l[2]?i?i.p(l,m):(i=M(l),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i(l){d||(_(a),_(o),d=!0)},o(l){v(a),v(o),d=!1},d(l){l&&h(e),a&&a.d(),o&&o.d(),i&&i.d()}}}const he=async({fetch:n,page:e})=>{const s=await ne("forms?slug=login");return s?{props:{loginForm:Object.entries(s[0].fields)},maxage:0}:{error:new Error}};function le(n,e,s){let t,r;T(n,B,f=>s(1,t=f)),T(n,G,f=>s(2,r=f));let{loginForm:c}=e;async function b(f){const p=C({},f.detail);ae(p),B.pipe(ee(d=>!d),te(G),se(1)).subscribe(([d,a])=>{a||oe("/")})}return n.$$set=f=>{"loginForm"in f&&s(0,c=f.loginForm)},[c,t,r,b]}class pe extends W{constructor(e){super();X(this,e,le,ie,Y,{loginForm:0})}}export{pe as default,he as load};
